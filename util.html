<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Utility Functions â€” PyMatting 1.1.10 documentation</title><link rel="stylesheet" href="/katex.min.css"><link rel="stylesheet" href="/style.css"><script src="/katex.min.js"></script></head><body><div class="sidebar"><div class="logo"><a href="/" class="sidebarlink"><img src="/figures/lemur_small.png" width="50px"></a><a href="/" class="logotext">PyMatting</a></div><div class="sidebarcontents">CONTENTS</div><ul><li><a href="/index.html" class="sidebarlink">PyMatting</a></li><li class="sidebarlink"><a href="/api.html" class="sidebarlink">API Reference</a><br><ul><li><a href="/alpha.html" class="sidebarlink">Alpha Estimation</a></li><li><a href="/cutout.html" class="sidebarlink">Cutout Function</a></li><li><a href="/foreground.html" class="sidebarlink">Foreground Estimation</a></li><li><a href="/laplacian.html" class="sidebarlink">Matting Laplacians</a></li><li><a href="/preconditioner.html" class="sidebarlink">Preconditioners</a></li><li><a href="/solver.html" class="sidebarlink">Solvers</a></li><li><a href="/util.html" class="sidebarlink currentpage">Utility Functions</a></li></ul></li><li><a href="/examples.html" class="sidebarlink">Examples</a></li><li><a href="/benchmarks.html" class="sidebarlink">Benchmarks</a></li><li><a href="/references.html" class="sidebarlink">Biblography</a></li><li><a href="https://pypi.org/project/PyMatting/" class="sidebarlink">PyPI</a></li><li><a href="https://www.github.com/pymatting/pymatting" class="sidebarlink">GitHub</a></li></ul></div><div class="middle"><h1>Utility Functions</h1><div><div class="function"><div id="boxfilter"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/boxfilter.py#L90-L155"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.boxfilter</h3><a href="#boxfilter" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>boxfilter</span><span class=operator>(</span><span class=name>src</span><span class=operator>,</span><span class=space> </span><span class=name>radius</span><span class=operator>=</span><span class=number>3</span><span class=operator>,</span><span class=space> </span><span class=name>mode</span><span class=operator>=</span><span class=string>&quot;same&quot;</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Computes the boxfilter (uniform blur, i.e. blur with kernel </span><span class="inline_code"><span class="codeinline"><span class=name>np</span><span class=operator>.</span><span class=name>ones</span><span class=operator>(</span><span class=name>radius</span><span class=operator>,</span><span class=space> </span><span class=name>radius</span><span class=operator>)</span></span></span><span class="text">) of an input image.</span></div><div class="textblock"><span class="text">Depending on the mode, the input image of size </span><span class="inline_math">\((h, w)\)</span><span class="text"> is either of shape</span></div><ul><li><span class="inline_math">\((h - 2 r, w - 2 r)\)</span><span class="text"> in case of &#x27;valid&#x27; mode</span></li><li><span class="inline_math">\((h, w)\)</span><span class="text"> in case of &#x27;same&#x27; mode</span></li><li><span class="inline_math">\((h + 2 r, w + 2 r)\)</span><span class="text"> in case of &#x27;full&#x27; mode</span></li></ul><img src="figures/padding.png"><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">src</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Input image having either shape </span><span class="inline_math">\(h \times w \times d\)</span><span class="text">  or </span><span class="inline_math">\(h \times w\)</span></div></ul></li><li class="parameteritem"><span class="parameter">radius</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Radius of boxfilter, defaults to </span><span class="inline_math">\(3\)</span></div></ul></li><li class="parameteritem"><span class="parameter">mode</span> (<i>str</i>)<ul><div class="parameterdescription"><span class="text">One of &#x27;valid&#x27;, &#x27;same&#x27; or &#x27;full&#x27;, defaults to &#x27;same&#x27;</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">dst</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Blurred image</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>boxfilter</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>eye</span><span class=operator>(</span><span class=number>5</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>radius</span><span class=operator>=</span><span class=number>2</span><span class=operator>,</span><span class=space> </span><span class=name>mode</span><span class=operator>=</span><span class=string>&quot;valid&quot;</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>5</span><span class=operator>.</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>boxfilter</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>eye</span><span class=operator>(</span><span class=number>5</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>radius</span><span class=operator>=</span><span class=number>2</span><span class=operator>,</span><span class=space> </span><span class=name>mode</span><span class=operator>=</span><span class=string>&quot;same&quot;</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>5</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>boxfilter</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>eye</span><span class=operator>(</span><span class=number>5</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>radius</span><span class=operator>=</span><span class=number>2</span><span class=operator>,</span><span class=space> </span><span class=name>mode</span><span class=operator>=</span><span class=string>&quot;full&quot;</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>5</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="knn"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/kdtree.py#L339-L367"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.knn</h3><a href="#knn" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>knn</span><span class=operator>(</span><span class=name>data_points</span><span class=operator>,</span><span class=space> </span><span class=name>query_points</span><span class=operator>,</span><span class=space> </span><span class=name>k</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Find k nearest neighbors in a data set. The implementation currently only supports data type </span><span class="inline_code"><span class="codeinline"><span class=name>np</span><span class=operator>.</span><span class=name>float32</span></span></span><span class="text">.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">data_points</span> (<i>numpy.ndarray (of type `np.float32`)</i>)<ul><div class="parameterdescription"><span class="text">Dataset with shape </span><span class="inline_math">\(n \times d\)</span><span class="text">, where </span><span class="inline_math">\(n\)</span><span class="text"> is the number of data points in the data set and </span><span class="inline_math">\(d\)</span><span class="text"> is the dimension of each data point</span></div></ul></li><li class="parameteritem"><span class="parameter">query_points</span> (<i>numpy.ndarray (of type `np.float32`)</i>)<ul><div class="parameterdescription"><span class="text">Data points for which the next neighbours should be calculated</span></div></ul></li><li class="parameteritem"><span class="parameter">k</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Number of neighbors to find</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">distances</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Distances to the neighbors</span></div></ul></li><li class="parameteritem"><span class="parameter">indices</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Indices of the k nearest neighbors in original data array</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>data_set</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>random</span><span class=operator>.</span><span class=name>randn</span><span class=operator>(</span><span class=number>100</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>knn</span><span class=operator>(</span><span class=name>data_set</span><span class=operator>.</span><span class=name>astype</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>float32</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>0.5</span><span class=operator>,</span><span class=number>0.5</span><span class=operator>]</span><span class=operator>]</span><span class=operator>,</span><span class=space> </span><span class=name>dtype</span><span class=operator>=</span><span class=name>np</span><span class=operator>.</span><span class=name>float32</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>k</span><span class=operator>=</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=operator>(</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>0.16233477</span><span class=operator>,</span><span class=space> </span><span class=number>0.25393516</span><span class=operator>]</span><span class=operator>]</span><span class=operator>,</span><span class=space> </span><span class=name>dtype</span><span class=operator>=</span><span class=name>float32</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>25</span><span class=operator>,</span><span class=space> </span><span class=number>17</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="__init__"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/kdtree.py#L239-L283"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.KDTree.__init__</h3><a href="#__init__" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>__init__</span><span class=operator>(</span><span class=name>self</span><span class=operator>,</span><span class=space> </span><span class=name>data_points</span><span class=operator>,</span><span class=space> </span><span class=name>min_leaf_size</span><span class=operator>=</span><span class=number>8</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Constructs a KDTree for given data points. The implementation currently only supports data type </span><span class="inline_code"><span class="codeinline"><span class=name>np</span><span class=operator>.</span><span class=name>float32</span></span></span><span class="text">.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">data_points</span> (<i>numpy.ndarray (of type `np.float32`)</i>)<ul><div class="parameterdescription"><span class="text">Dataset with shape </span><span class="inline_math">\(n \times d\)</span><span class="text">, where </span><span class="inline_math">\(n\)</span><span class="text"> is the number of data points in the data set and </span><span class="inline_math">\(d\)</span><span class="text"> is the dimension of each data point</span></div></ul></li><li class="parameteritem"><span class="parameter">min_leaf_size</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Minimum number of nodes in a leaf, defaults to 8</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>data_set</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>random</span><span class=operator>.</span><span class=name>randn</span><span class=operator>(</span><span class=number>100</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>tree</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>KDTree</span><span class=operator>(</span><span class=name>data_set</span><span class=operator>.</span><span class=name>astype</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>float32</span><span class=operator>)</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="query"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/kdtree.py#L285-L336"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.KDTree.query</h3><a href="#query" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>query</span><span class=operator>(</span><span class=name>self</span><span class=operator>,</span><span class=space> </span><span class=name>query_points</span><span class=operator>,</span><span class=space> </span><span class=name>k</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Query the tree</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">query_points</span> (<i>numpy.ndarray (of type `np.float32`)</i>)<ul><div class="parameterdescription"><span class="text">Data points for which the next neighbours should be calculated</span></div></ul></li><li class="parameteritem"><span class="parameter">k</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Number of neighbors to find</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">distances</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Distances to the neighbors</span></div></ul></li><li class="parameteritem"><span class="parameter">indices</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Indices of the k nearest neighbors in original data array</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>data_set</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>random</span><span class=operator>.</span><span class=name>randn</span><span class=operator>(</span><span class=number>100</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>tree</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>KDTree</span><span class=operator>(</span><span class=name>data_set</span><span class=operator>.</span><span class=name>astype</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>float32</span><span class=operator>)</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>tree</span><span class=operator>.</span><span class=name>query</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>0.5</span><span class=operator>,</span><span class=number>0.5</span><span class=operator>]</span><span class=operator>]</span><span class=operator>,</span><span class=space> </span><span class=name>dtype</span><span class=operator>=</span><span class=name>np</span><span class=operator>.</span><span class=name>float32</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>k</span><span class=operator>=</span><span class=number>3</span><span class=operator>)</span><span class=space>
</span><span class=operator>(</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>0.14234178</span><span class=operator>,</span><span class=space> </span><span class=number>0.15879704</span><span class=operator>,</span><span class=space> </span><span class=number>0.26760164</span><span class=operator>]</span><span class=operator>]</span><span class=operator>,</span><span class=space> </span><span class=name>dtype</span><span class=operator>=</span><span class=name>float32</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>29</span><span class=operator>,</span><span class=space> </span><span class=number>21</span><span class=operator>,</span><span class=space> </span><span class=number>20</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="__init__"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/timer.py#L7-L10"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.Timer.__init__</h3><a href="#__init__" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>__init__</span><span class=operator>(</span><span class=name>self</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Starts a timer</span></div></div></div><div><div class="function"><div id="stop"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/timer.py#L12-L39"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.Timer.stop</h3><a href="#stop" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>stop</span><span class=operator>(</span><span class=name>self</span><span class=operator>,</span><span class=space> </span><span class=name>message</span><span class=operator>=</span><span class=keyword>None</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Return and print time since last stop-call or initialization.
Also print elapsed time if message is provided.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">message</span> (<i>str</i>)<ul><div class="parameterdescription"><span class="text">Message to print in front of passed seconds</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>t</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>Timer</span><span class=operator>(</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>t</span><span class=operator>.</span><span class=name>stop</span><span class=operator>(</span><span class=operator>)</span><span class=space>
</span><span class=number>2.6157200919999966</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>t</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>Timer</span><span class=operator>(</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>t</span><span class=operator>.</span><span class=name>stop</span><span class=operator>(</span><span class=string>&#x27;Test&#x27;</span><span class=operator>)</span><span class=space>
</span><span class=name>Test</span><span class=space>  </span><span class=operator>-</span><span class=space> </span><span class=number>11.654551</span><span class=space> </span><span class=name>seconds</span><span class=space>
</span><span class=number>11.654551381000001</span></div></div></div></div></div><div><div class="function"><div id="apply_to_channels"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L9-L52"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.apply_to_channels</h3><a href="#apply_to_channels" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>apply_to_channels</span><span class=operator>(</span><span class=name>single_channel_func</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Creates a new function which operates on each channel</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">single_channel_func</span> (<i>function</i>)<ul><div class="parameterdescription"><span class="text">Function that acts on a single color channel</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">channel_func</span> (<i>function</i>)<ul><div class="parameterdescription"><span class="text">The same function that operates on all color channels</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>scipy</span><span class=operator>.</span><span class=name>signal</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=name>convolve2d</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>single_channel_fun</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=keyword>lambda</span><span class=space> </span><span class=name>x</span><span class=operator>:</span><span class=space> </span><span class=name>convolve2d</span><span class=operator>(</span><span class=name>x</span><span class=operator>,</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>ones</span><span class=operator>(</span><span class=operator>(</span><span class=number>3</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>)</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=string>&#x27;valid&#x27;</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>multi_channel_fun</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>apply_to_channels</span><span class=operator>(</span><span class=name>single_channel_fun</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>I</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>random</span><span class=operator>.</span><span class=name>rand</span><span class=operator>(</span><span class=number>480</span><span class=operator>,</span><span class=space> </span><span class=number>320</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>multi_channel_fun</span><span class=operator>(</span><span class=name>I</span><span class=operator>)</span><span class=operator>.</span><span class=name>shape</span><span class=space>
</span><span class=operator>(</span><span class=number>478</span><span class=operator>,</span><span class=space> </span><span class=number>318</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="vec_vec_dot"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L55-L79"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.vec_vec_dot</h3><a href="#vec_vec_dot" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>vec_vec_dot</span><span class=operator>(</span><span class=name>a</span><span class=operator>,</span><span class=space> </span><span class=name>b</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Computes the dot product of two vectors.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">a</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">First vector (if np.ndim(a) &gt; 1 the function calculates the product for the two last axes)</span></div></ul></li><li class="parameteritem"><span class="parameter">b</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Second vector (if np.ndim(b) &gt; 1 the function calculates the product for the two last axes)</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">product</span> (<i>scalar</i>)<ul><div class="parameterdescription"><span class="text">Dot product of </span><span class="inline_code"><span class="codeinline"><span class=name>a</span></span></span><span class="text"> and </span><span class="inline_code"><span class="codeinline"><span class=name>b</span></span></span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>a</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>ones</span><span class=operator>(</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>b</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>ones</span><span class=operator>(</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>vec_vec_dot</span><span class=operator>(</span><span class=name>a</span><span class=operator>,</span><span class=name>b</span><span class=operator>)</span><span class=space>
</span><span class=number>2.0</span></div></div></div></div></div><div><div class="function"><div id="mat_vec_dot"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L82-L106"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.mat_vec_dot</h3><a href="#mat_vec_dot" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>mat_vec_dot</span><span class=operator>(</span><span class=name>A</span><span class=operator>,</span><span class=space> </span><span class=name>b</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Calculates the matrix vector product for two arrays.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">A</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Matrix (if np.ndim(A) &gt; 2 the function calculates the product for the two last axes)</span></div></ul></li><li class="parameteritem"><span class="parameter">b</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Vector (if np.ndim(b) &gt; 1 the function calculates the product for the two last axes)</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">product</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Matrix vector product of both arrays</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>A</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>eye</span><span class=operator>(</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>b</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>ones</span><span class=operator>(</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>mat_vec_dot</span><span class=operator>(</span><span class=name>A</span><span class=operator>,</span><span class=name>b</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=number>1</span><span class=operator>.</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="vec_vec_outer"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L109-L132"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.vec_vec_outer</h3><a href="#vec_vec_outer" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>vec_vec_outer</span><span class=operator>(</span><span class=name>a</span><span class=operator>,</span><span class=space> </span><span class=name>b</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Computes the outer product of two vectors</span></div><div class="textblock"><span class="text">a: numpy.ndarray
    First vector (if np.ndim(b) &gt; 1 the function calculates the product for the two last axes)
b: numpy.ndarray
    Second vector (if np.ndim(b) &gt; 1 the function calculates the product for the two last axes)</span></div><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">product</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Outer product of </span><span class="inline_code"><span class="codeinline"><span class=name>a</span></span></span><span class="text"> and </span><span class="inline_code"><span class="codeinline"><span class=name>b</span></span></span><span class="text"> as numpy.ndarray</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>a</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>arange</span><span class=operator>(</span><span class=number>1</span><span class=operator>,</span><span class=number>3</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>b</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>arange</span><span class=operator>(</span><span class=number>1</span><span class=operator>,</span><span class=number>3</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>vec_vec_outer</span><span class=operator>(</span><span class=name>a</span><span class=operator>,</span><span class=name>b</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>1</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>2</span><span class=operator>,</span><span class=space> </span><span class=number>4</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="fix_trimap"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L135-L183"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.fix_trimap</h3><a href="#fix_trimap" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>fix_trimap</span><span class=operator>(</span><span class=space>
    </span><span class=name>trimap</span><span class=operator>,</span><span class=space>
    </span><span class=name>lower_threshold</span><span class=operator>=</span><span class=number>0.1</span><span class=operator>,</span><span class=space>
    </span><span class=name>upper_threshold</span><span class=operator>=</span><span class=number>0.9</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Fixes broken trimap </span><span class="inline_math">\(T\)</span><span class="text"> by thresholding the values</span></div><div class="math_block">$$    T^{\text{fixed}}_{ij}=
    \begin{cases}
        0,&amp;\text{if } T_{ij}&lt;\text{lower\_threshold}\\
        1,&amp;\text{if }T_{ij}&gt;\text{upper\_threshold}\\
        0.5, &amp;\text{otherwise}.\\
    \end{cases}
$$</div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">trimap</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Possibly broken trimap</span></div></ul></li><li class="parameteritem"><span class="parameter">lower_threshold</span> (<i>float</i>)<ul><div class="parameterdescription"><span class="text">Threshold used to determine background pixels, defaults to 0.1</span></div></ul></li><li class="parameteritem"><span class="parameter">upper_threshold</span> (<i>float</i>)<ul><div class="parameterdescription"><span class="text">Threshold used to determine foreground pixels, defaults to 0.9</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">fixed_trimap</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Trimap having values in </span><span class="inline_math">\(\{0, 0.5, 1\}\)</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>trimap</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=number>0</span><span class=operator>,</span><span class=number>0.1</span><span class=operator>,</span><span class=space> </span><span class=number>0.4</span><span class=operator>,</span><span class=space> </span><span class=number>0.9</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>fix_trimap</span><span class=operator>(</span><span class=name>trimap</span><span class=operator>,</span><span class=space> </span><span class=number>0.2</span><span class=operator>,</span><span class=space> </span><span class=number>0.8</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=number>0</span><span class=operator>.</span><span class=space> </span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>.</span><span class=space> </span><span class=operator>,</span><span class=space> </span><span class=number>0.5</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=space> </span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=space> </span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="isiterable"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L186-L210"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.isiterable</h3><a href="#isiterable" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>isiterable</span><span class=operator>(</span><span class=name>obj</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Checks if an object is iterable</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">obj</span> (<i>object</i>)<ul><div class="parameterdescription"><span class="text">Object to check</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">is_iterable</span> (<i>bool</i>)<ul><div class="parameterdescription"><span class="text">Boolean variable indicating whether the object is iterable</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>l</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=operator>[</span><span class=operator>]</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>isiterable</span><span class=operator>(</span><span class=name>l</span><span class=operator>)</span><span class=space>
</span><span class=keyword>True</span></div></div></div></div></div><div><div class="function"><div id="load_image"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L232-L260"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.load_image</h3><a href="#load_image" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>load_image</span><span class=operator>(</span><span class=space>
    </span><span class=name>path</span><span class=operator>,</span><span class=space>
    </span><span class=name>mode</span><span class=operator>=</span><span class=keyword>None</span><span class=operator>,</span><span class=space>
    </span><span class=name>size</span><span class=operator>=</span><span class=keyword>None</span><span class=operator>,</span><span class=space>
    </span><span class=name>resample</span><span class=operator>=</span><span class=string>&quot;box&quot;</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">This function can be used to load an image from a file.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">path</span> (<i>str</i>)<ul><div class="parameterdescription"><span class="text">Path of image to load.</span></div></ul></li><li class="parameteritem"><span class="parameter">mode</span> (<i>str</i>)<ul><div class="parameterdescription"><span class="text">Can be &quot;GRAY&quot;, &quot;RGB&quot; or something else (see PIL.convert())</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">image</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Loaded image</span></div></ul></li></ul></div></div><div><div class="function"><div id="save_image"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L263-L287"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.save_image</h3><a href="#save_image" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>save_image</span><span class=operator>(</span><span class=name>path</span><span class=operator>,</span><span class=space> </span><span class=name>image</span><span class=operator>,</span><span class=space> </span><span class=name>make_directory</span><span class=operator>=</span><span class=keyword>True</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Given a path, save an image there.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">path</span> (<i>str</i>)<ul><div class="parameterdescription"><span class="text">Where to save the image.</span></div></ul></li><li class="parameteritem"><span class="parameter">image</span> (<i>numpy.ndarray, dtype in [np.uint8, np.float32, np.float64]</i>)<ul><div class="parameterdescription"><span class="text">Image to save. </span><span class="text">Images of float dtypes should be in range [0, 1]. </span><span class="text">Images of uint8 dtype should be in range [0, 255]</span></div></ul></li><li class="parameteritem"><span class="parameter">make_directory</span> (<i>bool</i>)<ul><div class="parameterdescription"><span class="text">Whether to create the directories needed for the image path.</span></div></ul></li></ul></div></div><div><div class="function"><div id="to_rgb8"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L290-L331"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.to_rgb8</h3><a href="#to_rgb8" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>to_rgb8</span><span class=operator>(</span><span class=name>image</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Convertes an image to rgb8 color space</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">image</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Image to convert</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">image</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Converted image with same height and width as input image but with three color channels</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>I</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>eye</span><span class=operator>(</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>to_rgb8</span><span class=operator>(</span><span class=name>I</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=operator>[</span><span class=number>255</span><span class=operator>,</span><span class=space> </span><span class=number>255</span><span class=operator>,</span><span class=space> </span><span class=number>255</span><span class=operator>]</span><span class=operator>,</span><span class=space>
        </span><span class=operator>[</span><span class=space>  </span><span class=number>0</span><span class=operator>,</span><span class=space>   </span><span class=number>0</span><span class=operator>,</span><span class=space>   </span><span class=number>0</span><span class=operator>]</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=operator>[</span><span class=space>  </span><span class=number>0</span><span class=operator>,</span><span class=space>   </span><span class=number>0</span><span class=operator>,</span><span class=space>   </span><span class=number>0</span><span class=operator>]</span><span class=operator>,</span><span class=space>
        </span><span class=operator>[</span><span class=number>255</span><span class=operator>,</span><span class=space> </span><span class=number>255</span><span class=operator>,</span><span class=space> </span><span class=number>255</span><span class=operator>]</span><span class=operator>]</span><span class=operator>]</span><span class=operator>,</span><span class=space> </span><span class=name>dtype</span><span class=operator>=</span><span class=name>uint8</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="make_grid"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L334-L418"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.make_grid</h3><a href="#make_grid" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>make_grid</span><span class=operator>(</span><span class=name>images</span><span class=operator>,</span><span class=space> </span><span class=name>nx</span><span class=operator>=</span><span class=keyword>None</span><span class=operator>,</span><span class=space> </span><span class=name>ny</span><span class=operator>=</span><span class=keyword>None</span><span class=operator>,</span><span class=space> </span><span class=name>dtype</span><span class=operator>=</span><span class=keyword>None</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Plots a grid of images.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">images</span> (<i>list of numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">List of images to plot</span></div></ul></li><li class="parameteritem"><span class="parameter">nx</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Number of rows</span></div></ul></li><li class="parameteritem"><span class="parameter">ny</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Number of columns</span></div></ul></li><li class="parameteritem"><span class="parameter">dtype</span> (<i>type</i>)<ul><div class="parameterdescription"><span class="text">Data type of output array</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">grid</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Grid of images with datatype </span><span class="inline_code"><span class="codeinline"><span class=name>dtype</span></span></span></div></ul></li></ul></div></div><div><div class="function"><div id="show_images"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L421-L436"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.show_images</h3><a href="#show_images" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>show_images</span><span class=operator>(</span><span class=name>images</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Plot grid of images.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">images</span> (<i>list of numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">List of images to plot</span></div></ul></li><li class="parameteritem"><span class="parameter">height</span> (<i>int, matrix</i>)<ul><div class="parameterdescription"><span class="text">Height in pixels the output grid, defaults to 512</span></div></ul></li></ul></div></div><div><div class="function"><div id="trimap_split"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L439-L525"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.trimap_split</h3><a href="#trimap_split" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>trimap_split</span><span class=operator>(</span><span class=space>
    </span><span class=name>trimap</span><span class=operator>,</span><span class=space>
    </span><span class=name>flatten</span><span class=operator>=</span><span class=keyword>True</span><span class=operator>,</span><span class=space>
    </span><span class=name>bg_threshold</span><span class=operator>=</span><span class=number>0.1</span><span class=operator>,</span><span class=space>
    </span><span class=name>fg_threshold</span><span class=operator>=</span><span class=number>0.9</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">This function splits the trimap into foreground pixels, background pixels, and unknown pixels.</span></div><div class="textblock"><span class="text">Foreground pixels are pixels where the trimap has values larger than or equal to </span><span class="inline_code"><span class="codeinline"><span class=name>fg_threshold</span></span></span><span class="text"> (default: 0.9).
Background pixels are pixels where the trimap has values smaller than or equal to </span><span class="inline_code"><span class="codeinline"><span class=name>bg_threshold</span></span></span><span class="text"> (default: 0.1).
Pixels with other values are assumed to be unknown.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">trimap</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Trimap with shape </span><span class="inline_math">\(h \times w\)</span></div></ul></li><li class="parameteritem"><span class="parameter">flatten</span> (<i>bool</i>)<ul><div class="parameterdescription"><span class="text">If true np.flatten is called on the trimap</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">is_fg</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Boolean array indicating which pixel belongs to the foreground</span></div></ul></li><li class="parameteritem"><span class="parameter">is_bg</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Boolean array indicating which pixel belongs to the background</span></div></ul></li><li class="parameteritem"><span class="parameter">is_known</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Boolean array indicating which pixel is known</span></div></ul></li><li class="parameteritem"><span class="parameter">is_unknown</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Boolean array indicating which pixel is unknown</span></div></ul></li><li class="parameteritem"><span class="parameter">bg_threshold</span> (<i>float</i>)<ul><div class="parameterdescription"><span class="text">Pixels with smaller trimap values will be considered background.</span></div></ul></li><li class="parameteritem"><span class="parameter">fg_threshold</span> (<i>float</i>)<ul><div class="parameterdescription"><span class="text">Pixels with larger trimap values will be considered foreground.</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>trimap</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>1</span><span class=operator>,</span><span class=number>0</span><span class=operator>]</span><span class=operator>,</span><span class=operator>[</span><span class=number>0.5</span><span class=operator>,</span><span class=number>0.2</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>is_fg</span><span class=operator>,</span><span class=space> </span><span class=name>is_bg</span><span class=operator>,</span><span class=space> </span><span class=name>is_known</span><span class=operator>,</span><span class=space> </span><span class=name>is_unknown</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>trimap_split</span><span class=operator>(</span><span class=name>trimap</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>is_fg</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=space> </span><span class=keyword>True</span><span class=operator>,</span><span class=space> </span><span class=keyword>False</span><span class=operator>,</span><span class=space> </span><span class=keyword>False</span><span class=operator>,</span><span class=space> </span><span class=keyword>False</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>is_bg</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=keyword>False</span><span class=operator>,</span><span class=space>  </span><span class=keyword>True</span><span class=operator>,</span><span class=space> </span><span class=keyword>False</span><span class=operator>,</span><span class=space> </span><span class=keyword>False</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>is_known</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=space> </span><span class=keyword>True</span><span class=operator>,</span><span class=space>  </span><span class=keyword>True</span><span class=operator>,</span><span class=space> </span><span class=keyword>False</span><span class=operator>,</span><span class=space> </span><span class=keyword>False</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>is_unknown</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=keyword>False</span><span class=operator>,</span><span class=space> </span><span class=keyword>False</span><span class=operator>,</span><span class=space>  </span><span class=keyword>True</span><span class=operator>,</span><span class=space>  </span><span class=keyword>True</span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="sanity_check_image"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L528-L578"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.sanity_check_image</h3><a href="#sanity_check_image" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>sanity_check_image</span><span class=operator>(</span><span class=name>image</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Performs a sanity check for input images. Image values should be in the
range [0, 1], the </span><span class="inline_code"><span class="codeinline"><span class=name>dtype</span></span></span><span class="text"> should be </span><span class="inline_code"><span class="codeinline"><span class=name>np</span><span class=operator>.</span><span class=name>float32</span></span></span><span class="text"> or </span><span class="inline_code"><span class="codeinline"><span class=name>np</span><span class=operator>.</span><span class=name>float64</span></span></span><span class="text"> and the
image shape should be </span><span class="inline_code"><span class="codeinline"><span class=operator>(</span><span class=operator>?</span><span class=operator>,</span><span class=space> </span><span class=operator>?</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>)</span></span></span><span class="text">.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">image</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Image with shape </span><span class="inline_math">\(h \times w \times 3\)</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=name>check_image</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>image</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>random</span><span class=operator>.</span><span class=name>randn</span><span class=operator>(</span><span class=number>64</span><span class=operator>,</span><span class=space> </span><span class=number>64</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>)</span><span class=space> </span><span class=operator>*</span><span class=space> </span><span class=number>255</span><span class=operator>)</span><span class=operator>.</span><span class=name>astype</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>int32</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>sanity_check_image</span><span class=operator>(</span><span class=name>image</span><span class=operator>)</span><span class=space>
</span><span class=name>__main__</span><span class=operator>:</span><span class=number>1</span><span class=operator>:</span><span class=space> </span><span class=name>UserWarning</span><span class=operator>:</span><span class=space> </span><span class=name>Expected</span><span class=space> </span><span class=name>RGB</span><span class=space> </span><span class=name>image</span><span class=space> </span><span class=name>of</span><span class=space> </span><span class=name>shape</span><span class=space> </span><span class=operator>(</span><span class=operator>?</span><span class=operator>,</span><span class=space> </span><span class=operator>?</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>but</span><span class=space> </span><span class=name>image</span><span class=operator>.</span><span class=name>shape</span><span class=space> </span><span class=keyword>is</span><span class=space> </span><span class=operator>(</span><span class=number>64</span><span class=operator>,</span><span class=space> </span><span class=number>64</span><span class=operator>,</span><span class=space> </span><span class=number>2</span><span class=operator>)</span><span class=operator>.</span><span class=space>
</span><span class=name>__main__</span><span class=operator>:</span><span class=number>1</span><span class=operator>:</span><span class=space> </span><span class=name>UserWarning</span><span class=operator>:</span><span class=space> </span><span class=name>Image</span><span class=space> </span><span class=name>values</span><span class=space> </span><span class=name>should</span><span class=space> </span><span class=name>be</span><span class=space> </span><span class=keyword>in</span><span class=space> </span><span class=operator>[</span><span class=number>0</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>]</span><span class=operator>,</span><span class=space> </span><span class=name>but</span><span class=space> </span><span class=name>image</span><span class=operator>.</span><span class=keyword>min</span><span class=operator>(</span><span class=operator>)</span><span class=space> </span><span class=keyword>is</span><span class=space> </span><span class=operator>-</span><span class=number>933</span><span class=operator>.</span><span class=space>
</span><span class=name>__main__</span><span class=operator>:</span><span class=number>1</span><span class=operator>:</span><span class=space> </span><span class=name>UserWarning</span><span class=operator>:</span><span class=space> </span><span class=name>Image</span><span class=space> </span><span class=name>values</span><span class=space> </span><span class=name>should</span><span class=space> </span><span class=name>be</span><span class=space> </span><span class=keyword>in</span><span class=space> </span><span class=operator>[</span><span class=number>0</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>]</span><span class=operator>,</span><span class=space> </span><span class=name>but</span><span class=space> </span><span class=name>image</span><span class=operator>.</span><span class=keyword>max</span><span class=operator>(</span><span class=operator>)</span><span class=space> </span><span class=keyword>is</span><span class=space> </span><span class=number>999</span><span class=operator>.</span><span class=space>
</span><span class=name>__main__</span><span class=operator>:</span><span class=number>1</span><span class=operator>:</span><span class=space> </span><span class=name>UserWarning</span><span class=operator>:</span><span class=space> </span><span class=name>Unexpected</span><span class=space> </span><span class=name>image</span><span class=operator>.</span><span class=name>dtype</span><span class=space> </span><span class=name>int32</span><span class=operator>.</span><span class=space> </span><span class=name>Are</span><span class=space> </span><span class=name>you</span><span class=space> </span><span class=name>sure</span><span class=space> </span><span class=name>that</span><span class=space> </span><span class=name>you</span><span class=space> </span><span class=name>do</span><span class=space> </span><span class=keyword>not</span><span class=space> </span><span class=name>want</span><span class=space> </span><span class=name>to</span><span class=space> </span><span class=name>use</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>float32</span><span class=space> </span><span class=keyword>or</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>float64</span><span class=space> </span><span class=name>instead</span><span class=operator>?</span></div></div></div></div></div><div><div class="function"><div id="blend"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L581-L614"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.blend</h3><a href="#blend" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>blend</span><span class=operator>(</span><span class=name>foreground</span><span class=operator>,</span><span class=space> </span><span class=name>background</span><span class=operator>,</span><span class=space> </span><span class=name>alpha</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">This function composes a new image for given foreground image, background image and alpha matte.</span></div><div class="textblock"><span class="text">This is done by applying the composition equation</span></div><div class="math_block">$$    I = \alpha F + (1-\alpha)B.
$$</div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">foreground</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Foreground image</span></div></ul></li><li class="parameteritem"><span class="parameter">background</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Background image</span></div></ul></li><li class="parameteritem"><span class="parameter">alpha</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Alpha matte</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">image</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Composed image as numpy.ndarray</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>foreground</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>load_image</span><span class=operator>(</span><span class=string>&quot;data/lemur/lemur_foreground.png&quot;</span><span class=operator>,</span><span class=space> </span><span class=string>&quot;RGB&quot;</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>background</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>load_image</span><span class=operator>(</span><span class=string>&quot;data/lemur/beach.png&quot;</span><span class=operator>,</span><span class=space> </span><span class=string>&quot;RGB&quot;</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>alpha</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>load_image</span><span class=operator>(</span><span class=string>&quot;data/lemur/lemur_alpha.png&quot;</span><span class=operator>,</span><span class=space> </span><span class=string>&quot;GRAY&quot;</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>I</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>blend</span><span class=operator>(</span><span class=name>foreground</span><span class=operator>,</span><span class=space> </span><span class=name>background</span><span class=operator>,</span><span class=space> </span><span class=name>alpha</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="stack_images"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L617-L643"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.stack_images</h3><a href="#stack_images" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>stack_images</span><span class=operator>(</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">This function stacks images along the third axis.
This is useful for combining e.g. rgb color channels or color and alpha channels.</span></div><h4>Parameters</h4><ul></ul><ul><li><span class="text">images: numpy.ndarray</span></li></ul><div class="code_block"><div class="codeblock"><span class=name>Images</span><span class=space> </span><span class=name>to</span><span class=space> </span><span class=name>be</span><span class=space> </span><span class=name>stacked</span><span class=operator>.</span></div></div><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">image</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Stacked images as numpy.ndarray</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=operator>.</span><span class=name>util</span><span class=operator>.</span><span class=name>util</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=name>stack_images</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>I</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>stack_images</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>random</span><span class=operator>.</span><span class=name>rand</span><span class=operator>(</span><span class=number>4</span><span class=operator>,</span><span class=number>5</span><span class=operator>,</span><span class=number>3</span><span class=operator>)</span><span class=operator>,</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>random</span><span class=operator>.</span><span class=name>rand</span><span class=operator>(</span><span class=number>4</span><span class=operator>,</span><span class=number>5</span><span class=operator>,</span><span class=number>3</span><span class=operator>)</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>I</span><span class=operator>.</span><span class=name>shape</span><span class=space>
</span><span class=operator>(</span><span class=number>4</span><span class=operator>,</span><span class=space> </span><span class=number>5</span><span class=operator>,</span><span class=space> </span><span class=number>6</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="row_sum"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L646-L672"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.row_sum</h3><a href="#row_sum" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>row_sum</span><span class=operator>(</span><span class=name>A</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Calculate the sum of each row of a matrix</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">A</span> (<i>np.ndarray or scipy.sparse.spmatrix</i>)<ul><div class="parameterdescription"><span class="text">Matrix to sum rows of</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">row_sums</span> (<i>np.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Vector of summed rows</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>A</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>random</span><span class=operator>.</span><span class=name>rand</span><span class=operator>(</span><span class=number>2</span><span class=operator>,</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>A</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>0.62750946</span><span class=operator>,</span><span class=space> </span><span class=number>0.12917617</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>0.8599449</span><span class=space> </span><span class=operator>,</span><span class=space> </span><span class=number>0.5777254</span><span class=space> </span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>row_sum</span><span class=operator>(</span><span class=name>A</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=number>0.75668563</span><span class=operator>,</span><span class=space> </span><span class=number>1.4376703</span><span class=space> </span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="normalize_rows"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L675-L712"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.normalize_rows</h3><a href="#normalize_rows" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>normalize_rows</span><span class=operator>(</span><span class=name>A</span><span class=operator>,</span><span class=space> </span><span class=name>threshold</span><span class=operator>=</span><span class=number>0.0</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Normalize the rows of a matrix</span></div><div class="textblock"><span class="text">Rows with sum below threshold are left as-is.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">A</span> (<i>scipy.sparse.spmatrix</i>)<ul><div class="parameterdescription"><span class="text">Matrix to normalize</span></div></ul></li><li class="parameteritem"><span class="parameter">threshold</span> (<i>float</i>)<ul><div class="parameterdescription"><span class="text">Threshold to avoid division by zero</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">A</span> (<i>scipy.sparse.spmatrix</i>)<ul><div class="parameterdescription"><span class="text">Matrix with normalized rows</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>A</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>np</span><span class=operator>.</span><span class=name>arange</span><span class=operator>(</span><span class=number>4</span><span class=operator>)</span><span class=operator>.</span><span class=name>reshape</span><span class=operator>(</span><span class=number>2</span><span class=operator>,</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>normalize_rows</span><span class=operator>(</span><span class=name>A</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>0</span><span class=operator>.</span><span class=space> </span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=space> </span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>0.4</span><span class=operator>,</span><span class=space> </span><span class=number>0.6</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="grid_coordinates"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L715-L754"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.grid_coordinates</h3><a href="#grid_coordinates" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>grid_coordinates</span><span class=operator>(</span><span class=name>width</span><span class=operator>,</span><span class=space> </span><span class=name>height</span><span class=operator>,</span><span class=space> </span><span class=name>flatten</span><span class=operator>=</span><span class=keyword>False</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Calculates image pixel coordinates for an image with a specified shape</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">width</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Width of the input image</span></div></ul></li><li class="parameteritem"><span class="parameter">height</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Height of the input image</span></div></ul></li><li class="parameteritem"><span class="parameter">flatten</span> (<i>bool</i>)<ul><div class="parameterdescription"><span class="text">Whether the array containing the coordinates should be flattened or not, defaults to False</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">x</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">x coordinates</span></div></ul></li><li class="parameteritem"><span class="parameter">y</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">y coordinates</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>x</span><span class=operator>,</span><span class=space> </span><span class=name>y</span><span class=space> </span><span class=operator>=</span><span class=space> </span><span class=name>grid_coordinates</span><span class=operator>(</span><span class=number>2</span><span class=operator>,</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>x</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>0</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>0</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>y</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=number>0</span><span class=operator>,</span><span class=space> </span><span class=number>0</span><span class=operator>]</span><span class=operator>,</span><span class=space>
       </span><span class=operator>[</span><span class=number>1</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="sparse_conv_matrix_with_offsets"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L757-L804"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.sparse_conv_matrix_with_offsets</h3><a href="#sparse_conv_matrix_with_offsets" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>sparse_conv_matrix_with_offsets</span><span class=operator>(</span><span class=space>
    </span><span class=name>width</span><span class=operator>,</span><span class=space>
    </span><span class=name>height</span><span class=operator>,</span><span class=space>
    </span><span class=name>kernel</span><span class=operator>,</span><span class=space>
    </span><span class=name>dx</span><span class=operator>,</span><span class=space>
    </span><span class=name>dy</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Calculates a convolution matrix that can be applied to a vectorized image</span></div><div class="textblock"><span class="text">Additionally, this function allows to specify which pixels should be used for the convoltion, i.e.</span></div><div class="math_block">$$ \left(I * K\right)_{ij} = \sum_k K_k I_{i+{\Delta_y}_k,j+{\Delta_y}_k},
$$</div><div class="textblock"><span class="text">where </span><span class="inline_math">\(K\)</span><span class="text"> is the flattened convolution kernel.</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">width</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Width of the input image</span></div></ul></li><li class="parameteritem"><span class="parameter">height</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Height of the input image</span></div></ul></li><li class="parameteritem"><span class="parameter">kernel</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Convolutional kernel</span></div></ul></li><li class="parameteritem"><span class="parameter">dx</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Offset in x direction</span></div></ul></li><li class="parameteritem"><span class="parameter">dy</span> (<i>nunpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Offset in y direction</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">M</span> (<i>scipy.sparse.csr_matrix</i>)<ul><div class="parameterdescription"><span class="text">Convolution matrix</span></div></ul></li></ul></div></div><div><div class="function"><div id="sparse_conv_matrix"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L807-L837"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.sparse_conv_matrix</h3><a href="#sparse_conv_matrix" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>sparse_conv_matrix</span><span class=operator>(</span><span class=name>width</span><span class=operator>,</span><span class=space> </span><span class=name>height</span><span class=operator>,</span><span class=space> </span><span class=name>kernel</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Calculates a convolution matrix that can be applied to a vectorized image</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">width</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Width of the input image</span></div></ul></li><li class="parameteritem"><span class="parameter">height</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Height of the input image</span></div></ul></li><li class="parameteritem"><span class="parameter">kernel</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Convolutional kernel</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">M</span> (<i>scipy.sparse.csr_matrix</i>)<ul><div class="parameterdescription"><span class="text">Convolution matrix</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>sparse_conv_matrix</span><span class=operator>(</span><span class=number>3</span><span class=operator>,</span><span class=number>3</span><span class=operator>,</span><span class=name>np</span><span class=operator>.</span><span class=name>ones</span><span class=operator>(</span><span class=operator>(</span><span class=number>3</span><span class=operator>,</span><span class=number>3</span><span class=operator>)</span><span class=operator>)</span><span class=operator>)</span><span class=space>
</span><span class=operator>&lt;</span><span class=number>9</span><span class=name>x9</span><span class=space> </span><span class=name>sparse</span><span class=space> </span><span class=name>matrix</span><span class=space> </span><span class=name>of</span><span class=space> </span><span class=keyword>type</span><span class=space> </span><span class=string>&#x27;&lt;class &#x27;</span><span class=name>numpy</span><span class=operator>.</span><span class=name>float64</span><span class=string>&#x27;&gt;&#x27;</span><span class=space>
</span><span class=keyword>with</span><span class=space> </span><span class=number>49</span><span class=space> </span><span class=name>stored</span><span class=space> </span><span class=name>elements</span><span class=space> </span><span class=keyword>in</span><span class=space> </span><span class=name>Compressed</span><span class=space> </span><span class=name>Sparse</span><span class=space> </span><span class=name>Row</span><span class=space> </span><span class=keyword>format</span><span class=operator>&gt;</span></div></div></div></div></div><div><div class="function"><div id="weights_to_laplacian"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L840-L875"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.weights_to_laplacian</h3><a href="#weights_to_laplacian" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>weights_to_laplacian</span><span class=operator>(</span><span class=space>
    </span><span class=name>W</span><span class=operator>,</span><span class=space>
    </span><span class=name>normalize</span><span class=operator>=</span><span class=keyword>True</span><span class=operator>,</span><span class=space>
    </span><span class=name>regularization</span><span class=operator>=</span><span class=number>0.0</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Calculates the random walk normlized Laplacian matrix from the weight matrix</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">W</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Array of weights</span></div></ul></li><li class="parameteritem"><span class="parameter">normalize</span> (<i>bool</i>)<ul><div class="parameterdescription"><span class="text">Whether the rows of W should be normalized to 1, defaults to True</span></div></ul></li><li class="parameteritem"><span class="parameter">regularization</span> (<i>float</i>)<ul><div class="parameterdescription"><span class="text">Regularization strength, defaults to 0, i.e. no regularizaion</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">L</span> (<i>scipy.sparse.spmatrix</i>)<ul><div class="parameterdescription"><span class="text">Laplacian matrix</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>weights_to_laplacian</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>ones</span><span class=operator>(</span><span class=operator>(</span><span class=number>4</span><span class=operator>,</span><span class=number>4</span><span class=operator>)</span><span class=operator>)</span><span class=operator>)</span><span class=space>
</span><span class=name>matrix</span><span class=operator>(</span><span class=operator>[</span><span class=operator>[</span><span class=space> </span><span class=number>0.75</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>]</span><span class=operator>,</span><span class=space>
        </span><span class=operator>[</span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space>  </span><span class=number>0.75</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>]</span><span class=operator>,</span><span class=space>
        </span><span class=operator>[</span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space>  </span><span class=number>0.75</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>]</span><span class=operator>,</span><span class=space>
        </span><span class=operator>[</span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space> </span><span class=operator>-</span><span class=number>0.25</span><span class=operator>,</span><span class=space>  </span><span class=number>0.75</span><span class=operator>]</span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="normalize"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L878-L901"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.normalize</h3><a href="#normalize" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>normalize</span><span class=operator>(</span><span class=name>values</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Normalizes an array such that all values are between 0 and 1</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">values</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Array to normalize</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">result</span> (<i>numpy.ndarray</i>)<ul><div class="parameterdescription"><span class="text">Normalized array</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>import</span><span class=space> </span><span class=name>numpy</span><span class=space> </span><span class=keyword>as</span><span class=space> </span><span class=name>np</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>normalize</span><span class=operator>(</span><span class=name>np</span><span class=operator>.</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=number>0</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>,</span><span class=space> </span><span class=number>3</span><span class=operator>,</span><span class=space> </span><span class=number>10</span><span class=operator>]</span><span class=operator>)</span><span class=operator>)</span><span class=space>
</span><span class=name>array</span><span class=operator>(</span><span class=operator>[</span><span class=number>0</span><span class=operator>.</span><span class=space> </span><span class=operator>,</span><span class=space> </span><span class=number>0.1</span><span class=operator>,</span><span class=space> </span><span class=number>0.3</span><span class=operator>,</span><span class=space> </span><span class=number>1</span><span class=operator>.</span><span class=space> </span><span class=operator>]</span><span class=operator>)</span></div></div></div></div></div><div><div class="function"><div id="div_round_up"><a href="https:/github.com/pymatting/pymatting/blob/master/pymatting/util/util.py#L904-L925"><img src="/figures/github-mark.svg" title="Function definition on GitHub" class="github-icon"></a><h3 class="functionname">pymatting.div_round_up</h3><a href="#div_round_up" title="Permalink to this definition" class="functionanchorlink"> ðŸ”—</a></div><div class="signature"><h4>Signature</h4><div class="signature"><div class="codeblock"><span class=name>div_round_up</span><span class=operator>(</span><span class=name>x</span><span class=operator>,</span><span class=space> </span><span class=name>n</span><span class=operator>)</span></div></div></div><h4>Function Description</h4><div class="textblock"><span class="text">Divides a number x by another integer n and rounds up the result</span></div><h4>Parameters</h4><ul><li class="parameteritem"><span class="parameter">x</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Numerator</span></div></ul></li><li class="parameteritem"><span class="parameter">n</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Denominator</span></div></ul></li></ul><h4>Returns</h4><ul><li class="parameteritem"><span class="parameter">result</span> (<i>int</i>)<ul><div class="parameterdescription"><span class="text">Result</span></div></ul></li></ul><div class="block"><h4>Example</h4><div class="code_block"><div class="codeblock"><span class=indentation>&gt;&gt;&gt; </span><span class=keyword>from</span><span class=space> </span><span class=name>pymatting</span><span class=space> </span><span class=keyword>import</span><span class=space> </span><span class=operator>*</span><span class=space>
</span><span class=indentation>&gt;&gt;&gt; </span><span class=name>div_round_up</span><span class=operator>(</span><span class=number>3</span><span class=operator>,</span><span class=number>2</span><span class=operator>)</span><span class=space>
</span><span class=number>2</span></div></div></div></div></div><footer>Â© Copyright 2023, Thomas Germer, Tobias Uelwer, Stefan Conrad, Stefan Harmeling</footer></div><script src="/auto-render.min.js" onload="renderMathInElement(document.body)"></script></body></html>